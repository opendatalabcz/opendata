<?xml version='1.0' encoding='utf-8'?>
<!DOCTYPE hibernate-mapping PUBLIC
    "-//Hibernate/Hibernate Mapping DTD 3.0//EN"
    "http://www.hibernate.org/dtd/hibernate-mapping-3.0.dtd">
<hibernate-mapping>

    <class name="eu.profinit.opendata.model.DataInstance" table="data_instance" schema="public" catalog="opendata">
        <id name="dataInstanceId" column="data_instance_id"/>
        <property name="format" column="format"/>
        <property name="processed" column="processed"/>
        <property name="url" column="url"/>
        <many-to-one name="dataSource" class="eu.profinit.opendata.model.DataSource">
            <column name="data_source_id" not-null="true"/>
        </many-to-one>
        <set name="retrievals" inverse="true">
            <key>
                <column name="data_instance_id"/>
            </key>
            <one-to-many not-found="ignore" class="eu.profinit.opendata.model.Retrieval"/>
        </set>
    </class>
    <class name="eu.profinit.opendata.model.DataSource" table="data_source" schema="public" catalog="opendata">
        <id name="dataSourceId" column="data_source_id"/>
        <property name="incremental" column="is_incremental"/>
        <property name="lastProcessedDate" column="last_processed_date"/>
        <property name="recordType" column="record_type"/>
        <property name="periodicity" column="periodicity"/>
        <many-to-one name="entity" class="eu.profinit.opendata.model.Entity">
            <column name="entity_id" not-null="true"/>
        </many-to-one>
        <set name="dataInstances" inverse="true">
            <key>
                <column name="data_source_id" not-null="true"/>
            </key>
            <one-to-many not-found="ignore" class="eu.profinit.opendata.model.DataInstance"/>
        </set>
    </class>
    <class name="eu.profinit.opendata.model.Entity" table="entity" schema="public" catalog="opendata">
        <id name="entityId" column="entity_id"/>
        <property name="dic" column="dic"/>
        <property name="ico" column="ico"/>
        <property name="public" column="is_public"/>
        <property name="name" column="name"/>
        <property name="entityType" column="entity_type"/>
        <set name="dataSources" inverse="true">
            <key>
                <column name="entity_id" not-null="true"/>
            </key>
            <one-to-many not-found="ignore" class="eu.profinit.opendata.model.DataSource"/>
        </set>
    </class>
    <class name="eu.profinit.opendata.model.Record" table="record" schema="public" catalog="opendata">
        <id name="recordId" column="record_id"/>
        <property name="amountCzkWithVat" column="amount_czk_with_vat"/>
        <property name="amountCzkWithoutVat" column="amount_czk_without_vat"/>
        <property name="authorityIdentifier" column="authority_identifier"/>
        <property name="currency" column="currency"/>
        <property name="dateCreated" column="date_created"/>
        <property name="dateOfExpiry" column="date_of_expiry"/>
        <property name="dateOfPayment" column="date_of_payment"/>
        <property name="dueDate" column="due_date"/>
        <property name="inEffect" column="in_effect"/>
        <property name="masterId" column="master_id"/>
        <property name="originalCurrencyAmount" column="original_currency_amount"/>
        <property name="partnerCode" column="partner_code"/>
        <property name="subject" column="subject"/>
        <property name="variableSymbol" column="variable_symbol"/>
        <property name="recordType" column="record_type"/>
        <property name="authorityRole" column="authority_role"/>
    </class>
    <class name="eu.profinit.opendata.model.Retrieval" table="retrieval" schema="public" catalog="opendata">
        <id name="retrievalId" column="retrieval_id"/>
        <property name="date" column="date"/>
        <property name="failureReason" column="failure_reason"/>
        <property name="numBadRecords" column="num_bad_records"/>
        <property name="numRecordsInserted" column="num_records_inserted"/>
        <property name="success" column="success"/>
        <many-to-one name="retrievals" class="eu.profinit.opendata.model.DataInstance">
            <column name="data_instance_id"/>
        </many-to-one>
    </class>
</hibernate-mapping>